<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EstratÃ©gias â€¢ Trade Consolidator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
    <div class="layout">
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <span class="brand-logo" title="Trade Consolidator">
                        <svg class="logo-svg" viewBox="0 0 24 24" aria-hidden="true">
                            <rect x="3" y="12" width="4" height="9" rx="1"></rect>
                            <rect x="10" y="7" width="4" height="14" rx="1"></rect>
                            <rect x="17" y="3" width="4" height="18" rx="1"></rect>
                        </svg>
                    </span>
                    <span class="brand-name">Trade Consolidator</span>
                </div>
                <button id="sidebarToggle" class="sidebar-toggle">â‰ª</button>
            </div>
            <div class="sidebar-actions">
                <button class="btn btn-upload" onclick="openUploadModal()">+ Upload CSV</button>
            </div>
            <ul class="nav-list">
                <li class="nav-item"><a class="nav-link" href="dashboard.html"><span class="nav-icon">ðŸ“Š</span><span class="nav-text">Dashboard</span></a></li>
                <li class="nav-item"><a class="nav-link" href="trades.html"><span class="nav-icon">ðŸ“‹</span><span class="nav-text">Trades</span></a></li>
                <li class="nav-item"><a class="nav-link" href="strategies.html"><span class="nav-icon">ðŸ§ </span><span class="nav-text">EstratÃ©gias</span></a></li>
                <li class="nav-item"><a class="nav-link" href="diario.html"><span class="nav-icon">ðŸ““</span><span class="nav-text">DiÃ¡rio</span></a></li>
                <li class="nav-item"><a class="nav-link" href="reportes.html"><span class="nav-icon">ðŸ“ˆ</span><span class="nav-text">Reportes</span></a></li>
                <li class="nav-item"><a class="nav-link" href="playbook.html"><span class="nav-icon">ðŸ“˜</span><span class="nav-text">Playbook</span></a></li>
            </ul>
        </aside>
        <main class="main">
        <div class="app-container">
            <div class="app-header">
                <h1>ðŸ§  EstratÃ©gias</h1>
                <div></div>
            </div>
        <div class="upload-section" id="strategiesSection" style="background: var(--card-bg); padding: 15px; border-radius: 8px; margin-top: 10px;">
            <div class="form-group"><label>Nome</label><input type="text" id="strategyName"></div>
            <div class="form-group"><label>Timeframe</label><input type="text" id="strategyTimeframe"></div>
            <div class="form-group"><label>Risco/Recompensa Esperado</label><input type="number" id="strategyRR" step="0.01"></div>
            <div class="form-group"><label>DescriÃ§Ã£o</label><input type="text" id="strategyDescription"></div>
            <button class="btn btn-primary" onclick="handleCreateStrategy()">Criar EstratÃ©gia</button>
            <div id="strategyMessage" style="margin-top:8px;"></div>
        </div>

        <h2 style="margin: 20px 0 10px 0;">EstratÃ©gias Criadas</h2>
        <div style="overflow-x:auto;">
            <table style="width:100%; border-collapse:collapse;">
                <thead>
                    <tr>
                        <th style="background: var(--surface); padding: 12px; text-align:left; border-bottom: 2px solid #334155; color: var(--text);">Nome</th>
                        <th style="background: var(--surface); padding: 12px; text-align:left; border-bottom: 2px solid #334155; color: var(--text);">Timeframe</th>
                        <th style="background: var(--surface); padding: 12px; text-align:left; border-bottom: 2px solid #334155; color: var(--text);">RR Esperado</th>
                        <th style="background: var(--surface); padding: 12px; text-align:left; border-bottom: 2px solid #334155; color: var(--text);">DescriÃ§Ã£o</th>
                        <th style="background: var(--surface); padding: 12px; text-align:left; border-bottom: 2px solid #334155; color: var(--text);">AÃ§Ãµes</th>
                    </tr>
                </thead>
                <tbody id="strategiesTableBody"></tbody>
            </table>
        </div>
        </div>
        </main>
    </div>
    <div id="modalBackdrop" class="modal-backdrop"></div>
    <div id="uploadModal" class="modal">
        <div class="modal-card">
            <div class="modal-header"><strong>ðŸ“¤ Importar CSV</strong><button class="close-btn" onclick="closeUploadModal()">âœ•</button></div>
            <div>
                <input type="file" id="csvFileModal" accept=".csv" style="display:none" onchange="handleFileUpload(event)">
                <button class="btn btn-primary" onclick="document.getElementById('csvFileModal').click()">Selecionar arquivo CSV</button>
                <div id="uploadMessage" style="margin-top:8px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeUploadModal()">Fechar</button>
            </div>
        </div>
    </div>
    <script>
    (function(){
        var btn = document.getElementById('sidebarToggle');
        var sb = document.getElementById('sidebar');
        if (btn && sb) { btn.addEventListener('click', function(){ sb.classList.toggle('collapsed'); }); }
    })();
    function openUploadModal(){ var m = document.getElementById('uploadModal'); var b = document.getElementById('modalBackdrop'); if (m && b) { m.classList.add('open'); b.classList.add('open'); } }
    function closeUploadModal(){ var m = document.getElementById('uploadModal'); var b = document.getElementById('modalBackdrop'); if (m && b) { m.classList.remove('open'); b.classList.remove('open'); } }
    </script>
    <script src="globals.js"></script>
    <script src="supabase-init.js"></script>
    <script src="theme.js"></script>
    <script src="operations.js"></script>
    <script src="strategies.js"></script>
    <script src="trades.js"></script>
    <script src="main.js"></script>
</body>
</html>